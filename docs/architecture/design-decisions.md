# ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ±ºå®šè¨˜éŒ² (ADR)

> **æ³¨æ„**: ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å°‚é–€çš„ãªè¨­è¨ˆåˆ¤æ–­ã‚’è¨˜éŒ²ã—ãŸã‚‚ã®ã§ã™ã€‚ä¸€éƒ¨ã®å‚ç…§ãƒªãƒ³ã‚¯ã¯æº–å‚™ä¸­ã§ã™ã€‚

## ãƒ•ã‚§ãƒ¼ã‚º2: è¨­è¨ˆãƒ»æº–å‚™ - ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆè­°è«–éŒ²

### å‚åŠ è€…ãƒšãƒ«ã‚½ãƒŠ
- **Martin Fowler**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ‘ã‚¿ãƒ¼ãƒ³
- **Kent Beck**: TDDã€ã‚·ãƒ³ãƒ—ãƒ«è¨­è¨ˆã€XP ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- **Robert C. Martin (Uncle Bob)**: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€SOLIDåŸå‰‡
- **Eric Evans**: ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆ (DDD)
- **Michael Feathers**: ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰æ”¹å–„ã€ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
- **Jeff Sutherland**: ã‚¹ã‚¯ãƒ©ãƒ ã€ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«é–‹ç™º
- **å’Œç”°å“äºº**: TDDã€ãƒ†ã‚¹ãƒˆè¨­è¨ˆã€ç¶™ç¶šçš„æ”¹å–„

---

## è­°è«–1: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã®é¸æŠ

### ğŸ¯ è«–ç‚¹: ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ vs ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

**Robert C. Martin**: 
> ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ã¯æ˜ç¢ºã«ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã€‚ãƒ•ãƒ©ã‚°è©•ä¾¡ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ã€Kill-Switchæ©Ÿèƒ½ã¯å¤–éƒ¨ä¾å­˜ã‹ã‚‰ç‹¬ç«‹ã™ã¹ãã ã€‚ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ä¾å­˜é–¢ä¿‚é€†è»¢ã‚’é©ç”¨ã—ã€DynamoDBã‚„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯å¤–éƒ¨ãƒãƒ¼ãƒˆã¨ã—ã¦æ‰±ã†ã¹ãã€‚

**Eric Evans**:
> åŒæ„è¦‹ã ã€‚ãŸã ã—ã€ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°è‡ªä½“ãŒãƒ‰ãƒ¡ã‚¤ãƒ³ã®ä¸­æ ¸æ¦‚å¿µãªã®ã‹æ¤œè¨ãŒå¿…è¦ã€‚ç§ã®è¦‹è§£ã§ã¯ã€ã“ã‚Œã¯æŠ€è¡“çš„ãªæ¨ªæ–­çš„é–¢å¿ƒäº‹ï¼ˆCross-cutting Concernï¼‰ã§ã‚ã‚Šã€ç´”ç²‹ãªãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚ˆã‚Šã‚‚ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®è¨­è¨ˆãŒé‡è¦ã ã‚ã†ã€‚

**Martin Fowler**:
> èˆˆå‘³æ·±ã„ç‚¹ã ã€‚ã—ã‹ã—ã€ãƒ†ãƒŠãƒ³ãƒˆåˆ¥ã®è¤‡é›‘ãªãƒ«ãƒ¼ãƒ«ï¼ˆA/Bãƒ†ã‚¹ãƒˆã€æ®µéšçš„ãƒ­ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆï¼‰ã‚’è€ƒæ…®ã™ã‚‹ã¨ã€ã“ã‚Œã¯å˜ãªã‚‹è¨­å®šä»¥ä¸Šã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒã¤ã€‚ç§ã¯ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã‚·ãƒ³ãƒ—ãƒ«ã«å§‹ã‚ã¦ã€å¿…è¦ã«å¿œã˜ã¦ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã«é€²åŒ–ã•ã›ã‚‹ã“ã¨ã‚’ææ¡ˆã™ã‚‹ã€‚

**Kent Beck**:
> YAGNIåŸå‰‡ã‹ã‚‰ã™ã‚‹ã¨ã€MVPãƒ•ã‚§ãƒ¼ã‚ºã§ã¯æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹é€ ã‹ã‚‰å§‹ã‚ã‚‹ã¹ãã€‚ç¾åœ¨ã®ãƒ•ãƒ©ã‚°è©•ä¾¡è¦ä»¶ï¼ˆON/OFF + Kill-Switchï¼‰ãªã‚‰ã€éåº¦ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ä¸è¦ã ã€‚

### ğŸ’¡ æ±ºå®š: **æ®µéšçš„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é€²åŒ–**

```typescript
// Phase 1: ã‚·ãƒ³ãƒ—ãƒ«ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ (MVP)
interface FeatureFlagEvaluator {
  isEnabled(context: Context, flagKey: string): Promise<boolean>
}

// Phase 2: ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«é€²åŒ– (å°†æ¥)
interface FeatureFlagRepository {
  findFlag(flagKey: string): Promise<FeatureFlag>
  findTenantOverride(tenantId: string, flagKey: string): Promise<Override>
}
```

**æ ¹æ‹ **: 
- MVPã¯æœ€å°è¤‡é›‘åº¦ã§ä¾¡å€¤æä¾›
- å°†æ¥ã®æ‹¡å¼µæ€§ã¯ä¿æŒ
- ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ã¯ç¾è¨­è¨ˆã§ã‚‚ç¢ºä¿

---

## è­°è«–2: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥

### ğŸ¯ è«–ç‚¹: Fail-Fast vs Graceful Degradation

**Michael Feathers**:
> ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®éšœå®³ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’åœæ­¢ã•ã›ã‚‹ã¹ãã§ã¯ãªã„ã€‚Graceful Degradationã§ã€ã‚¨ãƒ©ãƒ¼æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆé€šå¸¸ã¯falseï¼‰ã‚’è¿”ã™ã¹ãã ã€‚

**Robert C. Martin**:
> åŒæ„ã™ã‚‹ãŒã€ã‚¨ãƒ©ãƒ¼ã¯é©åˆ‡ã«ãƒ­ã‚°è¨˜éŒ²ã—ã€ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã«é€šçŸ¥ã•ã‚Œã‚‹ã¹ãã€‚Silent Failureã¯çµ¶å¯¾ã«é¿ã‘ã‚‹ã¹ãã ã€‚

**å’Œç”°å“äºº**:
> ãƒ†ã‚¹ãƒˆè¦³ç‚¹ã‹ã‚‰ã€ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒé‡è¦ã€‚ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ã¦å„ç¨®éšœå®³ã‚·ãƒŠãƒªã‚ªã‚’ãƒ†ã‚¹ãƒˆã§ãã‚‹è¨­è¨ˆã«ã™ã¹ãã€‚ã¾ãŸã€Circuit Breaker ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œè¨ã‚‚å¿…è¦ã§ã¯ï¼Ÿ

**Kent Beck**:
> æœ€åˆã¯ã‚·ãƒ³ãƒ—ãƒ«ãªRetry + Fallbackã‹ã‚‰å§‹ã‚ã‚ˆã†ã€‚Circuit Breakerã¯é‹ç”¨çµŒé¨“ã‚’ç©ã‚“ã§ã‹ã‚‰è¿½åŠ ã™ã‚‹ã€‚

### ğŸ’¡ æ±ºå®š: **Safe Fallback + Comprehensive Logging**

```typescript
class FeatureFlagEvaluator {
  async isEnabled(context: Context, flagKey: string): Promise<boolean> {
    try {
      return await this.evaluateFlag(context, flagKey);
    } catch (error) {
      // Critical: å¿…ãšãƒ­ã‚°è¨˜éŒ²
      this.logger.error('FeatureFlag evaluation failed', { 
        flagKey, 
        tenantId: context.tenantId, 
        error 
      });
      
      // Safe: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§å®‰å…¨å´ã«
      return this.getDefaultValue(flagKey);
    }
  }
}
```

**æ ¹æ‹ **:
- ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®å¯ç”¨æ€§ã‚’å„ªå…ˆ
- è¦³æ¸¬å¯èƒ½æ€§ï¼ˆObservabilityï¼‰ã‚’ç¢ºä¿
- æ®µéšçš„ãªè€éšœå®³æ€§å‘ä¸Š

---

## è­°è«–3: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

### ğŸ¯ è«–ç‚¹: Local Cache vs Distributed Cache vs Hybrid

**Martin Fowler**:
> Lambdaç’°å¢ƒã§ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠå†åˆ©ç”¨ã«ã‚ˆã‚‹Local CacheãŒåŠ¹æœçš„ã€‚ãŸã ã—ã€TTLç®¡ç†ã¨ä¸€è²«æ€§ãŒèª²é¡Œã«ãªã‚‹ã€‚

**Robert C. Martin**:
> ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯å¤–éƒ¨ä¾å­˜ã¨ã—ã¦æŠ½è±¡åŒ–ã™ã¹ãã€‚LocalCacheå®Ÿè£…ã‹ã‚‰å§‹ã‚ã¦ã€å¾Œã§Redisãªã©ã®åˆ†æ•£ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ç½®ãæ›ãˆå¯èƒ½ãªè¨­è¨ˆã«ã™ã‚‹ã€‚

**Michael Feathers**:
> ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ãƒ†ã‚¹ãƒˆãŒè¤‡é›‘ã«ãªã‚ŠãŒã¡ã€‚TTLé–¢é€£ã®ãƒ†ã‚¹ãƒˆã¯æ™‚é–“ä¾å­˜ã«ãªã‚‹ãŸã‚ã€Time Providerãƒ‘ã‚¿ãƒ¼ãƒ³ã§ãƒ†ã‚¹ã‚¿ãƒ–ãƒ«ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

**Kent Beck**:
> Red-Green-Refactor ã‚µã‚¤ã‚¯ãƒ«ã§ã€ã¾ãšã¯ã‚·ãƒ³ãƒ—ãƒ«ãªMap-based cacheã‹ã‚‰å§‹ã‚ã‚‹ã€‚TTLãƒ†ã‚¹ãƒˆã¯ãƒ¢ãƒƒã‚¯ã‚¿ã‚¤ãƒãƒ¼ã§å®Ÿè£…ã€‚

### ğŸ’¡ æ±ºå®š: **Local Cache with Interface Abstraction**

```typescript
interface CacheProvider {
  get(key: string): Promise<any>;
  set(key: string, value: any, ttl?: number): Promise<void>;
  invalidate(key: string): Promise<void>;
  invalidateAll(): Promise<void>;
}

// Phase 1: Lambda Local Cache
class MemoryCacheProvider implements CacheProvider {
  // å®Ÿè£…
}

// Phase 2: åˆ†æ•£ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (å°†æ¥)
class RedisCacheProvider implements CacheProvider {
  // å®Ÿè£…
}
```

**æ ¹æ‹ **:
- Lambdaç’°å¢ƒã«æœ€é©åŒ–
- å°†æ¥ã®åˆ†æ•£ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç§»è¡Œã‚’è€ƒæ…®
- ãƒ†ã‚¹ã‚¿ãƒ–ãƒ«ãªè¨­è¨ˆ

---

## è­°è«–4: ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ğŸ¯ è«–ç‚¹: ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰æ§‹æˆã¨TDDé©ç”¨

**Kent Beck**:
> ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°è©•ä¾¡ã¯ç´”ç²‹é–¢æ•°ã«è¿‘ã„ã€‚TDDã§å˜ä½“ãƒ†ã‚¹ãƒˆã‹ã‚‰å§‹ã‚ã€å„ç¨®æ¡ä»¶ï¼ˆKill-Switchã€Overrideã€Defaultï¼‰ã‚’ç¶²ç¾…çš„ã«ãƒ†ã‚¹ãƒˆã™ã‚‹ã€‚

**å’Œç”°å“äºº**:
> åŒæ„Ÿã€‚ãŸã ã—ã€DynamoDBä¾å­˜ã®ãƒ†ã‚¹ãƒˆã‚’ã©ã†æ‰±ã†ã‹ãŒé‡è¦ã€‚å®Ÿéš›ã®AWSã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ãªãã€LocalStackã‚„ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã†ã¹ãã€‚

**Michael Feathers**:
> ãƒ¬ã‚¬ã‚·ãƒ¼åŒ–ã‚’é˜²ããŸã‚ã€å¤–éƒ¨ä¾å­˜ã¯å…¨ã¦interfaceåŒ–ã™ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ãŸé«˜é€Ÿãªå˜ä½“ãƒ†ã‚¹ãƒˆãŒå¯èƒ½ã«ãªã‚‹ã€‚

**Martin Fowler**:
> çµ±åˆãƒ†ã‚¹ãƒˆã‚‚é‡è¦ã ãŒã€æ¯”ç‡ã¯å˜ä½“:çµ±åˆ:E2E = 70:20:10ç¨‹åº¦ã«ã™ã‚‹ã€‚ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ã¯APIãŒä¸­å¿ƒãªã®ã§ã€Contract Testingã‚‚æ¤œè¨ä¾¡å€¤ãŒã‚ã‚‹ã€‚

### ğŸ’¡ æ±ºå®š: **TDD + Test Double Strategy**

```typescript
// ãƒ†ã‚¹ãƒˆæ§‹æˆä¾‹
describe('FeatureFlagEvaluator', () => {
  // 1. Pure logic (Fast)
  it('should return false when kill-switch is active');
  it('should return tenant override when exists');
  
  // 2. With mocks (Fast) 
  it('should handle DynamoDB errors gracefully');
  
  // 3. Integration (Slower)
  it('should work with local DynamoDB');
});
```

**ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰**:
- å˜ä½“ãƒ†ã‚¹ãƒˆ (Vitest): 70% - ãƒ­ã‚¸ãƒƒã‚¯ + ãƒ¢ãƒƒã‚¯
- çµ±åˆãƒ†ã‚¹ãƒˆ (Vitest): 20% - LocalStack DynamoDB
- E2E ãƒ†ã‚¹ãƒˆ (Playwright): 10% - å®Ÿç’°å¢ƒAPI

**æ ¹æ‹ **:
- é«˜é€Ÿãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚µã‚¤ã‚¯ãƒ«
- å›å¸°ãƒ†ã‚¹ãƒˆã®ä¿¡é ¼æ€§
- CI/CDåŠ¹ç‡æ€§

---

## è­°è«–5: è¦³æ¸¬å¯èƒ½æ€§ (Observability)

### ğŸ¯ è«–ç‚¹: ãƒ­ã‚°ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°æˆ¦ç•¥

**Martin Fowler**:
> ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã®çŠ¶æ…‹å¤‰æ›´ã¯ã€ãƒ“ã‚¸ãƒã‚¹ä¸Šé‡è¦ãªæƒ…å ±ã ã€‚å˜ãªã‚‹æŠ€è¡“ãƒ­ã‚°ã§ã¯ãªãã€ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦è¨˜éŒ²ã™ã¹ãã€‚

**Robert C. Martin**:
> ãƒ­ã‚°ã¯æ§‹é€ åŒ–ã—ã€æ©Ÿæ¢°å¯èª­æ€§ã‚’é‡è¦–ã™ã‚‹ã€‚ã¾ãŸã€å€‹äººæƒ…å ±ã‚’å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒå¿…è¦ã€‚

**Jeff Sutherland**:
> ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼ã‚„ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ãŒã€ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã®å½±éŸ¿ã‚’ç†è§£ã§ãã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒå¿…è¦ã€‚ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§å¯è¦–åŒ–ã™ã¹ãã€‚

**å’Œç”°å“äºº**:
> ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®è¦³æ¸¬å¯èƒ½æ€§ã‚‚é‡è¦ã€‚ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã®ãƒ•ãƒ©ã‚°çŠ¶æ…‹ãŒã€å¾Œã‹ã‚‰è¿½è·¡å¯èƒ½ã§ã‚ã‚‹ã¹ãã€‚

### ğŸ’¡ æ±ºå®š: **Structured Logging + Business Metrics**

```typescript
interface ObservabilityService {
  // æŠ€è¡“ãƒ¡ãƒˆãƒªã‚¯ã‚¹
  recordEvaluationLatency(duration: number, flagKey: string): void;
  recordCacheHitRate(hitRate: number): void;
  
  // ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹  
  recordFlagEvaluation(flagKey: string, result: boolean, reason: string): void;
  recordFlagToggle(flagKey: string, oldState: boolean, newState: boolean, user: string): void;
  
  // ã‚¨ãƒ©ãƒ¼è¿½è·¡
  recordError(error: Error, context: any): void;
}
```

**ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«å®šç¾©**:
- ERROR: ã‚·ã‚¹ãƒ†ãƒ éšœå®³ã€è¦immediateå¯¾å¿œ
- WARN: æœŸå¾…ã—ãªã„çŠ¶æ…‹ã€monitoringå¿…è¦
- INFO: ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã€ç›£æŸ»è¦
- DEBUG: æŠ€è¡“è©³ç´°ã€é–‹ç™º/éšœå®³èª¿æŸ»ç”¨

**æ ¹æ‹ **:
- ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã¨tech metricsã®ä¸¡ç«‹
- è¦åˆ¶å¯¾å¿œï¼ˆç›£æŸ»ãƒ­ã‚°ï¼‰
- é‹ç”¨åŠ¹ç‡æ€§

---

## è­°è«–6: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæˆ¦ç•¥

### ğŸ¯ è«–ç‚¹: Blue-Green vs Canary vs Rolling Deployment

**Jeff Sutherland**:
> ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ è‡ªä½“ãŒã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é‡è¦ãªã‚¤ãƒ³ãƒ•ãƒ©ã€‚æ®µéšçš„ãªãƒªã‚¹ã‚¯è»½æ¸›ãŒå¿…è¦ã€‚Canary Deploymentã‚’æ¨å¥¨ã™ã‚‹ã€‚

**Martin Fowler**:
> åŒæ„è¦‹ã ãŒã€ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ãŒè‡ªåˆ†è‡ªèº«ã‚’ãƒ•ãƒ©ã‚°ã§åˆ¶å¾¡ã™ã‚‹ã¨ã„ã†èˆˆå‘³æ·±ã„å†å¸°æ€§ãŒã‚ã‚‹ã€‚ã“ã‚Œã‚’ã©ã†æ‰±ã†ã‹ã¯é‡è¦ãªè¨­è¨ˆåˆ¤æ–­ã ã€‚

**Robert C. Martin**:
> ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæˆ¦ç•¥ã¯ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®é–¢å¿ƒäº‹ã§ã¯ãªã„ã€‚ãŸã ã—ã€Immutable Infrastructureã®åŸå‰‡ã¯å®ˆã‚‹ã¹ãã€‚

**Kent Beck**:
> æœ€åˆã¯ã‚·ãƒ³ãƒ—ãƒ«ãªBlue-Greenã‹ã‚‰å§‹ã‚ã¦ã€é‹ç”¨çµŒé¨“ã‚’ç©ã‚“ã§ã‹ã‚‰Canaryã«é€²åŒ–ã•ã›ã‚‹ã€‚

### ğŸ’¡ æ±ºå®š: **Evolutionary Deployment Strategy**

**Phase 1**: Blue-Green Deployment (MVP)
- Lambda Aliasã‚’ä½¿ç”¨ã—ãŸç¬æ™‚åˆ‡ã‚Šæ›¿ãˆ
- 1åˆ†ä»¥å†…ã®rollback capability

**Phase 2**: Canary Deployment (å°†æ¥)
- Weighted routing (10% â†’ 50% â†’ 100%)
- è‡ªå‹•rollback triggers

**ç‰¹åˆ¥è€ƒæ…®**:
```typescript
// ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ è‡ªä½“ã®ãƒ•ãƒ©ã‚°
const SYSTEM_FLAGS = {
  NEW_EVALUATION_ENGINE: 'system_new_engine_enable',
  ENHANCED_CACHE: 'system_enhanced_cache_enable'
} as const;
```

**æ ¹æ‹ **:
- ã‚·ã‚¹ãƒ†ãƒ ä¿¡é ¼æ€§ã®æ®µéšçš„å‘ä¸Š
- é‹ç”¨ãƒãƒ¼ãƒ ã®å­¦ç¿’æ›²ç·šè€ƒæ…®
- Cost vs Risk ã®ãƒãƒ©ãƒ³ã‚¹

---

## æœ€çµ‚æ±ºå®šã‚µãƒãƒªãƒ¼

### ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡

1. **Progressive Architecture**: ã‚·ãƒ³ãƒ—ãƒ« â†’ è¤‡é›‘ã•ã‚’æ®µéšçš„ã«
2. **Dependency Inversion**: å¤–éƒ¨ä¾å­˜ã®æŠ½è±¡åŒ–
3. **Fail-Safe Design**: ã‚¨ãƒ©ãƒ¼æ™‚ã¯å®‰å…¨å´ã«å€’ã™
4. **Observable by Design**: è¦³æ¸¬å¯èƒ½æ€§ã‚’è¨­è¨ˆæ®µéšã‹ã‚‰
5. **Test-Driven Evolution**: ãƒ†ã‚¹ãƒˆã«ã‚ˆã‚‹å“è³ªä¿è¨¼

### ğŸ“ è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨

- **Strategy Pattern**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…ã®åˆ‡ã‚Šæ›¿ãˆ
- **Template Method**: ãƒ•ãƒ©ã‚°è©•ä¾¡ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- **Circuit Breaker**: å°†æ¥ã®è€éšœå®³æ€§å‘ä¸Š
- **Observer Pattern**: ãƒ•ãƒ©ã‚°å¤‰æ›´é€šçŸ¥

### ğŸ¯ å“è³ªå±æ€§å„ªå…ˆé †ä½

1. **å¯ç”¨æ€§** (Availability): 99.9%+
2. **æ€§èƒ½** (Performance): <10ms response time
3. **ä¿å®ˆæ€§** (Maintainability): ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§
4. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** (Security): ç›£æŸ»ãƒ­ã‚°ã€èªå¯
5. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** (Scalability): å°†æ¥æ‹¡å¼µæ€§

---

## å®Ÿè£…ã¸ã®è½ã¨ã—è¾¼ã¿

ã“ã®è­°è«–çµæœã¯ã€ä»¥ä¸‹ã®å®Ÿè£…æ±ºå®šã«åæ˜ ã•ã‚Œã¾ã—ãŸï¼š

1. **packages/core/**: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢
2. **ãƒ¢ãƒƒã‚¯æˆ¦ç•¥**: ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£é‡è¦–ã®è¨­è¨ˆ
3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: Graceful degradationå®Ÿè£…
4. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: Local cache + interfaceæŠ½è±¡åŒ–
5. **è¦³æ¸¬å¯èƒ½æ€§**: æ§‹é€ åŒ–ãƒ­ã‚° + ãƒ¡ãƒˆãƒªã‚¯ã‚¹

### ğŸ”„ ç¶™ç¶šçš„æ”¹å–„

ã“ã®è¨­è¨ˆæ±ºå®šã¯ã€å®Ÿè£…çµŒé¨“ã¨é‹ç”¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«åŸºã¥ã„ã¦ç¶™ç¶šçš„ã«è¦‹ç›´ã•ã‚Œã¾ã™ã€‚
ç‰¹ã«ä»¥ä¸‹ã®æŒ‡æ¨™ã‚’æ³¨è¦–ï¼š

- ãƒ•ãƒ©ã‚°è©•ä¾¡ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡
- ã‚¨ãƒ©ãƒ¼ç‡ã¨MTTR
- é–‹ç™ºãƒãƒ¼ãƒ ã®ç”Ÿç”£æ€§æŒ‡æ¨™

---

*ã“ã®è­°è«–éŒ²ã¯ã€Martin Fowlerã€Kent Beckã€Robert C. Martinã€Eric Evansã€Michael Feathersã€Jeff Sutherlandã€å’Œç”°å“äººã®å„æ°ã®å…¬é–‹ã•ã‚ŒãŸè¦‹è§£ã¨å®Ÿè·µã«åŸºã¥ã„ã¦æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚*